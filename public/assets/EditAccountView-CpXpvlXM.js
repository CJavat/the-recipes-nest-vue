import{d as k,u as N,e as c,f,n as h,c as n,a as e,w as _,g as p,v as g,h as x,j as w,l as S,o,_ as E}from"./index-C2R5qiPR.js";import{u as A}from"./user.store-Dj1Y-Cd3.js";import{S as y}from"./sweetalert2.esm.all-BGf-Fe8G.js";const U={class:"pt-7"},V={class:"mt-6 border-t border-t-sky-300 dark:border-t-sky-900"},B={class:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},C={key:0,class:"text-red-500"},M={class:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},z={key:0,class:"text-red-500"},j={class:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},q=["disabled"],T={key:1},R=k({__name:"EditAccountView",setup(D){const m=S(),u=N(),v=A(),l=c(!1),a=c(),t=f({firstName:"",lastName:""}),r=f({firstName:!1,lastName:!1});h(()=>{if(a.value=u.user??void 0,!a.value){m.replace("/dashboard");return}t.firstName=a.value.firstName,t.lastName=a.value.lastName});const b=async()=>{l.value=!0;try{if(!a.value)return;if(t.firstName==="")return r.firstName=!0;if(r.firstName=!1,t.lastName==="")return r.lastName=!0;r.lastName=!1;const i=await v.updateProfile(a.value.id,t);u.updateUser(i),y.fire("Usuario Actualizado","Tu perfil se ha actualizado correctamente","success").then(()=>m.replace("/dashboard/my-account"));return}catch(i){console.log(i),y.fire("Error",i,"error")}finally{l.value=!1}};return(i,s)=>(o(),n("div",U,[e("div",null,[s[4]||(s[4]=e("div",{class:"px-4 sm:px-0"},[e("h3",{class:"text-2xl text-black dark:text-white mb-3"},"Mi Cuenta")],-1)),e("div",V,[e("form",{class:"divide-y divide-sky-300 dark:divide-sky-900",onSubmit:_(b,["prevent"])},[e("div",B,[s[2]||(s[2]=e("dt",{class:"text-sm font-medium leading-6 text-black dark:text-white"},"Nombre",-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>t.firstName=d),id:"firstName",name:"firstName",type:"text",class:"block w-full rounded-md border-0 pl-3 py-1.5 text-sky-950 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-500 outline-none sm:text-sm sm:leading-6",required:""},null,512),[[g,t.firstName]]),r.firstName?(o(),n("span",C," El nombre es inválido ")):x("",!0)]),e("div",M,[s[3]||(s[3]=e("dt",{class:"text-sm font-medium leading-6 text-black dark:text-white"},"Apellido",-1)),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>t.lastName=d),id:"lastName",name:"lastName",type:"text",autocomplete:"email",class:"block w-full rounded-md border-0 pl-3 py-1.5 text-sky-950 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-500 outline-none sm:text-sm sm:leading-6",required:""},null,512),[[g,t.lastName]]),r.lastName?(o(),n("span",z," El apellido es inválido ")):x("",!0)]),e("div",j,[e("button",{disabled:l.value,type:"submit",class:"flex w-full justify-center rounded-md bg-sky-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-sky-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},[l.value?(o(),w(E,{key:0,class:"w-6"})):(o(),n("span",T,"Actualizar Cuenta "))],8,q)])],32)])])]))}});export{R as default};
