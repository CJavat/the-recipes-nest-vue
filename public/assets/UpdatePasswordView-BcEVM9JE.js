import{d as k,e as u,u as b,f as c,n as h,c as d,a as r,g as m,v as p,h as f,j as _,w as P,l as S,o,_ as C}from"./index-C2R5qiPR.js";import{u as V}from"./user.store-Dj1Y-Cd3.js";import{S as w}from"./sweetalert2.esm.all-BGf-Fe8G.js";const B={class:"md:px-4 md:py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},L={key:0,class:"text-red-500"},U={class:"my-5 md:px-4 md:py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},z={key:0,class:"text-red-500"},A={class:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},E=["disabled"],M={key:1},D=k({__name:"UpdatePasswordView",setup(R){const a=u(!1),g=S(),y=b(),x=V(),i=u(),e=c({password:"",rePassword:""}),t=c({password:!1,rePassword:!1});h(()=>{i.value=y.user});const v=async()=>{var n;a.value=!0;try{if(!((n=i.value)!=null&&n.id))return;if(e.password.length<6)return t.password=!0;if(t.password=!1,e.rePassword!==e.password)return t.rePassword=!0;t.rePassword=!1;const s=await x.updateProfile(i.value.id,{password:e.password});w.fire("Cuenta Actualizada","La contraseña se actualizó correctamente","success").then(()=>g.replace({name:"login"}))}catch(s){console.error(s),w.fire("Error",s,"error")}finally{a.value=!1}};return(n,s)=>(o(),d("form",{class:"divide-y divide-sky-300 dark:divide-sky-900",onSubmit:P(v,["prevent"])},[r("div",B,[s[2]||(s[2]=r("dt",{class:"text-sm font-medium leading-6 text-black dark:text-white"},"Contraseña",-1)),m(r("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>e.password=l),id:"password",name:"password",type:"password",class:"block w-full rounded-md border-0 pl-3 py-1.5 text-sky-950 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-500 outline-none sm:text-sm sm:leading-6",required:""},null,512),[[p,e.password]]),t.password?(o(),d("span",L," La contraseña es inválida ")):f("",!0)]),r("div",U,[s[3]||(s[3]=r("dt",{class:"text-sm font-medium leading-6 text-black dark:text-white"},"Repetir Contraseña",-1)),m(r("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>e.rePassword=l),id:"rePassword",name:"rePassword",type:"password",class:"block w-full rounded-md border-0 pl-3 py-1.5 text-sky-950 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-500 outline-none sm:text-sm sm:leading-6",required:""},null,512),[[p,e.rePassword]]),t.rePassword?(o(),d("span",z," Las contraseñas deben ser iguales ")):f("",!0)]),r("div",A,[r("button",{disabled:a.value,type:"submit",class:"flex w-full justify-center rounded-md bg-sky-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-sky-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},[a.value?(o(),_(C,{key:0,class:"w-6"})):(o(),d("span",M,"Actualizar Contraseña"))],8,E)])],32))}});export{D as default};
