import{d as h,u as k,e as n,n as y,c as d,a as t,b as u,o as c,_ as v}from"./index-C2R5qiPR.js";import{u as _}from"./user.store-Dj1Y-Cd3.js";import{_ as w}from"./AdvancedCropper.vue_vue_type_script_setup_true_lang-Cn5s0iY4.js";import{S as p}from"./sweetalert2.esm.all-BGf-Fe8G.js";const g={class:"pt-7"},S={class:"mt-6 w-full md:max-w-7xl container mx-auto flex flex-col justify-center items-center"},C={key:0,class:"px-4 py-6 sm:px-0"},F=["disabled"],z=["src"],I={key:1,class:"px-4 py-6 sm:px-0"},D=h({__name:"UpdateImageView",setup(U){const o=k(),m=_(),f="http://localhost:3000/api",s=n(!1),l=n(),r=n(null);y(()=>{var a;(a=o.user)!=null&&a.avatar.startsWith("http")?l.value=o.user.avatar:l.value=`${f.replace("/api","")}/${o.user.avatar}`});const b=async a=>{s.value=!0;const e=new FormData;e.append("file",a);try{const i=await m.updatePhoto(e);o.updateUser(i),p.fire("Imagen Actualizada","La imagen de perfil ha sido actualizada correctamente","success").then(()=>{location.reload()})}catch(i){console.log(i),p.fire("Error","No se pudo actualizar tu imagen","error")}finally{s.value=!1}},x=()=>{r.value&&r.value.openFileDialog()};return(a,e)=>(c(),d("div",g,[e[3]||(e[3]=t("div",{class:"px-4 sm:px-0 border-b border-b-sky-300 dark:border-b-sky-900"},[t("h3",{class:"text-2xl text-black dark:text-white mb-3"},"Actualizar Foto")],-1)),t("div",S,[s.value?(c(),d("div",I,[u(v,{class:"h-36 w-36 md:h-56 md:w-56"})])):(c(),d("div",C,[u(w,{class:"w-full md:w-96 h-96",ref_key:"imageCropperRef",ref:r,onFileSelected:b},null,512),t("button",{disabled:s.value,onClick:x,type:"button",class:"h-36 w-36 md:h-56 md:w-56 inline-block relative rounded-full border border-sky-500"},[t("img",{src:l.value,alt:"Foto de perfil",class:"h-36 w-36 md:h-56 md:w-56 object-scale-down rounded-full"},null,8,z),e[0]||(e[0]=t("span",{class:"absolute inset-0 flex items-center justify-center text-white font-semibold bg-black bg-opacity-50 rounded-full opacity-0 hover:opacity-100 transition-opacity duration-300"},"Cambiar foto de perfil",-1))],8,F)])),e[1]||(e[1]=t("span",{class:"md:hidden text-sky-950 dark:text-sky-50 font-bold text-2xl"},"Cambiar foto de perfil",-1)),e[2]||(e[2]=t("span",{class:"hidden md:block text-sky-950 dark:text-sky-50 font-bold text-xl"},"Selecciona la foto para cambiarla",-1))])]))}});export{D as default};
